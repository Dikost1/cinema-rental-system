Описание классов, методов и полей (COURSEPROJECT)
=================================================

Проект: CinemaRentalSystem (Avalonia, MVVM)
-------------------------------------------

·     Program – основной класс запуска Avalonia-приложения, содержит точку входа и конфигурацию AppBuilder.
      Поля: нет.
      Методы:
      - Main(string[] args) — точка входа, запускает приложение.
      - BuildAvaloniaApp() — собирает конфигурацию Avalonia (AppBuilder).

·     App : Application – класс приложения Avalonia: загружает XAML и создает главное окно.
      Поля: нет.
      Методы:
      - Initialize() — загружает `App.axaml`.
      - OnFrameworkInitializationCompleted() — создает `MainWindow` и задает `DataContext = MainWindowViewModel`.

·     ViewLocator : IDataTemplate – “локатор” представлений: по типу ViewModel находит и создает соответствующий View.
      Поля: нет.
      Методы:
      - Build(object? data) : Control? — создает View по имени типа (ViewModel → View), выставляет DataContext.
      - Match(object? data) : bool — проверяет, что `data` является `ViewModelBase`.

=== Models ===

·     DataContainer – контейнер всех данных системы (списки кинотеатров/поставщиков/фильмов/аренд).
      Поля: нет.
      Свойства:
      - List<Cinema> Cinemas — список кинотеатров.
      - List<Supplier> Suppliers — список поставщиков.
      - List<Film> Films — список фильмов.
      - List<Rental> Rentals — список аренд.
      Методы: нет (только auto-properties).

·     DataStorage – сервис загрузки/сохранения данных в JSON и выполнения CRUD-операций над сущностями.
      Поля:
      - _dataFilePath : string — путь к JSON файлу.
      - _jsonOptions : JsonSerializerOptions — настройки сериализации/десериализации.
      Свойства:
      - Data : DataContainer (get; private set;) — текущие данные в памяти.
      Методы:
      - DataStorage(string dataFilePath = "cinema_rental_data.json") — конструктор (настраивает путь/JSON и вызывает LoadData()).
      - LoadData() — загружает данные из JSON (или создает пустые и сохраняет файл).
      - SaveData() — сохраняет Data в JSON.
      - AddCinema(Cinema cinema)
      - UpdateCinema(Cinema cinema)
      - DeleteCinema(Guid cinemaId)
      - GetCinemaById(Guid id) : Cinema?
      - AddSupplier(Supplier supplier)
      - UpdateSupplier(Supplier supplier)
      - DeleteSupplier(Guid supplierId)
      - GetSupplierById(Guid id) : Supplier?
      - AddFilm(Film film)
      - UpdateFilm(Film film)
      - DeleteFilm(Guid filmId)
      - GetFilmById(Guid id) : Film?
      - AddRental(Rental rental)
      - UpdateRental(Rental rental)
      - DeleteRental(Guid rentalId)
      - GetRentalById(Guid id) : Rental?

·     Validator (static) – статический класс валидации (ИНН/телефон/счет/годы/суммы/даты/обязательные поля).
      Поля: нет.
      Методы:
      - ValidateINN(string inn) : bool
      - ValidatePhone(string phone) : bool
      - ValidateAccountNumber(string accountNumber) : bool
      - ValidateReleaseYear(int year) : bool
      - ValidateSeatsCount(int seatsCount) : bool
      - ValidateAmount(decimal amount) : bool
      - ValidateRentalDates(DateTime startDate, DateTime endDate) : bool
      - ValidateRequiredString(string value) : bool
      - GetINNErrorMessage() : string
      - GetPhoneErrorMessage() : string
      - GetAccountNumberErrorMessage() : string
      - GetReleaseYearErrorMessage() : string
      - GetSeatsCountErrorMessage() : string
      - GetAmountErrorMessage() : string
      - GetRentalDatesErrorMessage() : string
      - GetRequiredFieldErrorMessage(string fieldName) : string
      - ValidateNumericString(string value) : bool
      - GetNumericStringErrorMessage(string fieldName) : string

·     Cinema : INotifyPropertyChanged – модель “Кинотеатр” с уведомлениями об изменениях свойств.
      Поля (private backing):
      - _id : Guid
      - _name : string
      - _address : string
      - _phone : string
      - _seatsCount : int
      - _director : string
      - _owner : string
      - _bank : string
      - _accountNumber : string
      - _inn : string
      События:
      - PropertyChanged
      Свойства:
      - Id : Guid
      - Name : string
      - Address : string
      - Phone : string
      - SeatsCount : int
      - Director : string
      - Owner : string
      - Bank : string
      - AccountNumber : string
      - INN : string
      Методы:
      - Cinema() — конструктор (создает новый Guid).
      - OnPropertyChanged(string? propertyName = null)
      - SetProperty<T>(ref T field, T value, string? propertyName = null) : bool
      - ToString() : string

·     Film : INotifyPropertyChanged – модель “Фильм” с уведомлениями об изменениях свойств.
      Поля (private backing):
      - _id : Guid
      - _title : string
      - _category : string
      - _screenwriter : string
      - _director : string
      - _productionCompany : string
      - _releaseYear : int
      - _supplierId : Guid
      - _purchaseCost : decimal
      События:
      - PropertyChanged
      Свойства:
      - Id : Guid
      - Title : string
      - Category : string
      - Screenwriter : string
      - Director : string
      - ProductionCompany : string
      - ReleaseYear : int
      - SupplierId : Guid
      - PurchaseCost : decimal
      Методы:
      - Film() — конструктор (создает новый Guid, выставляет год по умолчанию).
      - OnPropertyChanged(string? propertyName = null)
      - SetProperty<T>(ref T field, T value, string? propertyName = null) : bool
      - ToString() : string

·     Supplier : INotifyPropertyChanged – модель “Поставщик” с уведомлениями об изменениях свойств.
      Поля (private backing):
      - _id : Guid
      - _name : string
      - _legalAddress : string
      - _bank : string
      - _accountNumber : string
      - _inn : string
      События:
      - PropertyChanged
      Свойства:
      - Id : Guid
      - Name : string
      - LegalAddress : string
      - Bank : string
      - AccountNumber : string
      - INN : string
      Методы:
      - Supplier() — конструктор (создает новый Guid).
      - OnPropertyChanged(string? propertyName = null)
      - SetProperty<T>(ref T field, T value, string? propertyName = null) : bool
      - ToString() : string

·     Rental : INotifyPropertyChanged – модель “Аренда” (какой кинотеатр арендует какой фильм и на какие даты).
      Поля (private backing):
      - _id : Guid
      - _cinemaId : Guid
      - _filmId : Guid
      - _demonstrationStartDate : DateTimeOffset
      - _demonstrationEndDate : DateTimeOffset
      - _rentalPayment : decimal
      - _lateFee : decimal
      - _notes : string
      События:
      - PropertyChanged
      Свойства:
      - Id : Guid
      - CinemaId : Guid
      - FilmId : Guid
      - DemonstrationStartDate : DateTimeOffset
      - DemonstrationEndDate : DateTimeOffset
      - RentalPayment : decimal
      - LateFee : decimal
      - Notes : string
      Методы:
      - Rental() — конструктор (создает новый Guid и даты по умолчанию).
      - OnPropertyChanged(string? propertyName = null)
      - SetProperty<T>(ref T field, T value, string? propertyName = null) : bool

=== ViewModels ===

·     ViewModelBase : INotifyPropertyChanged – базовый класс для ViewModel, реализующий уведомления об изменениях.
      Поля: нет.
      События:
      - PropertyChanged
      Методы:
      - OnPropertyChanged(string? propertyName = null)
      - SetProperty<T>(ref T field, T value, string? propertyName = null) : bool

·     RelayCommand : ICommand – команда для MVVM: хранит делегаты Execute/CanExecute и уведомляет UI об изменениях.
      Поля:
      - _execute : Action<object?> — действие команды.
      - _canExecute : Func<object?, bool>? — предикат доступности команды.
      События:
      - CanExecuteChanged
      Методы:
      - RelayCommand(Action<object?> execute, Func<object?, bool>? canExecute = null) — конструктор.
      - CanExecute(object? parameter) : bool
      - Execute(object? parameter)
      - RaiseCanExecuteChanged()

·     MainWindowViewModel : ViewModelBase – главная ViewModel: хранит общий `DataStorage`, экземпляры под-VM и команды навигации.
      Поля:
      - _dataStorage : DataStorage
      - _currentView : ViewModelBase
      Свойства:
      - CurrentView : ViewModelBase — текущая отображаемая ViewModel.
      - CinemasViewModel : CinemasViewModel
      - SuppliersViewModel : SuppliersViewModel
      - FilmsViewModel : FilmsViewModel
      - RentalsViewModel : RentalsViewModel
      - ShowCinemasCommand : ICommand
      - ShowSuppliersCommand : ICommand
      - ShowFilmsCommand : ICommand
      - ShowRentalsCommand : ICommand
      Методы:
      - MainWindowViewModel() — конструктор (инициализирует DataStorage/VM/команды и ставит стартовый экран).

·     CinemasViewModel : ViewModelBase – управление кинотеатрами: список, выбор, добавление/обновление/удаление, валидация полей.
      Поля:
      - _dataStorage : DataStorage
      - _selectedCinema : Cinema?
      - _editingCinema : Cinema
      - _errorMessage, _nameError, _phoneError, _seatsCountError, _accountNumberError, _innError : string
      Свойства:
      - HasErrorMessage/HasNameError/HasPhoneError/HasSeatsCountError/HasAccountNumberError/HasINNError : bool
      - Cinemas : ObservableCollection<Cinema>
      - SelectedCinema : Cinema?
      - EditingCinema : Cinema
      - ErrorMessage/NameError/PhoneError/SeatsCountError/AccountNumberError/INNError : string
      - AddCommand/UpdateCommand/DeleteCommand/ClearCommand : ICommand
      Методы:
      - CinemasViewModel(DataStorage dataStorage) — конструктор.
      - EditingCinema_PropertyChanged(...)
      - CanAdd(object? parameter) : bool
      - Add(object? parameter)
      - CanUpdate(object? parameter) : bool
      - Update(object? parameter)
      - CanDelete(object? parameter) : bool
      - Delete(object? parameter)
      - Clear(object? parameter)
      - CloneCinema(Cinema source) : Cinema
      - ValidateCinema(out string errorMessage) : bool
      - ValidateAll()
      - ValidateField(string? propertyName)
      - ClearValidationErrors()

·     SuppliersViewModel : ViewModelBase – управление поставщиками: список, выбор, добавление/обновление/удаление, валидация.
      Поля:
      - _dataStorage : DataStorage
      - _selectedSupplier : Supplier?
      - _editingSupplier : Supplier
      - _errorMessage, _nameError, _accountNumberError, _innError : string
      Свойства:
      - HasErrorMessage/HasNameError/HasAccountNumberError/HasINNError : bool
      - Suppliers : ObservableCollection<Supplier>
      - SelectedSupplier : Supplier?
      - EditingSupplier : Supplier
      - ErrorMessage/NameError/AccountNumberError/INNError : string
      - AddCommand/UpdateCommand/DeleteCommand/ClearCommand : ICommand
      Методы:
      - SuppliersViewModel(DataStorage dataStorage)
      - EditingSupplier_PropertyChanged(...)
      - CanAdd(object? parameter) : bool
      - Add(object? parameter)
      - CanUpdate(object? parameter) : bool
      - Update(object? parameter)
      - CanDelete(object? parameter) : bool
      - Delete(object? parameter)
      - Clear(object? parameter)
      - CloneSupplier(Supplier source) : Supplier
      - ValidateSupplier(out string errorMessage) : bool
      - ValidateAll()
      - ValidateField(string? propertyName)
      - ClearValidationErrors()

·     FilmsViewModel : ViewModelBase – управление фильмами: список, связь с поставщиком, CRUD и валидация.
      Поля:
      - _dataStorage : DataStorage
      - _selectedFilm : Film?
      - _editingFilm : Film
      - _selectedSupplier : Supplier?
      - _errorMessage, _titleError, _releaseYearError, _purchaseCostError, _supplierError : string
      Свойства:
      - HasErrorMessage/HasTitleError/HasReleaseYearError/HasPurchaseCostError/HasSupplierError : bool
      - Films : ObservableCollection<Film>
      - Suppliers : ObservableCollection<Supplier>
      - SelectedFilm : Film?
      - EditingFilm : Film
      - SelectedSupplier : Supplier?
      - ErrorMessage/TitleError/ReleaseYearError/PurchaseCostError/SupplierError : string
      - AddCommand/UpdateCommand/DeleteCommand/ClearCommand : ICommand
      Методы:
      - FilmsViewModel(DataStorage dataStorage)
      - EditingFilm_PropertyChanged(...)
      - CanAdd(object? parameter) : bool
      - Add(object? parameter)
      - CanUpdate(object? parameter) : bool
      - Update(object? parameter)
      - CanDelete(object? parameter) : bool
      - Delete(object? parameter)
      - Clear(object? parameter)
      - CloneFilm(Film source) : Film
      - ValidateFilm(out string errorMessage) : bool
      - ValidateAll()
      - ValidateField(string? propertyName)
      - ClearValidationErrors()
      - GetSupplierName(Guid supplierId) : string

·     RentalsViewModel : ViewModelBase – управление арендой: выбор кинотеатра/фильма, CRUD и валидация дат/сумм.
      Поля:
      - _dataStorage : DataStorage
      - _selectedRental : Rental?
      - _editingRental : Rental
      - _selectedCinema : Cinema?
      - _selectedFilm : Film?
      - _errorMessage, _cinemaError, _filmError, _demonstrationStartError, _demonstrationEndError, _rentalPaymentError, _lateFeeError : string
      Свойства:
      - HasErrorMessage/HasCinemaError/HasFilmError/HasDemonstrationStartError/HasDemonstrationEndError/HasRentalPaymentError/HasLateFeeError : bool
      - Rentals : ObservableCollection<Rental>
      - Cinemas : ObservableCollection<Cinema>
      - Films : ObservableCollection<Film>
      - SelectedRental : Rental?
      - EditingRental : Rental
      - SelectedCinema : Cinema?
      - SelectedFilm : Film?
      - ErrorMessage/CinemaError/FilmError/DemonstrationStartError/DemonstrationEndError/RentalPaymentError/LateFeeError : string
      - AddCommand/UpdateCommand/DeleteCommand/ClearCommand : ICommand
      Методы:
      - RentalsViewModel(DataStorage dataStorage)
      - EditingRental_PropertyChanged(...)
      - CanAdd(object? parameter) : bool
      - Add(object? parameter)
      - CanUpdate(object? parameter) : bool
      - Update(object? parameter)
      - CanDelete(object? parameter) : bool
      - Delete(object? parameter)
      - Clear(object? parameter)
      - CloneRental(Rental source) : Rental
      - ValidateRental(out string errorMessage) : bool
      - ValidateAll()
      - ValidateField(string? propertyName)
      - ClearValidationErrors()
      - GetCinemaName(Guid cinemaId) : string
      - GetFilmTitle(Guid filmId) : string

=== Views ===

·     MainWindow : Window – главное окно приложения.
      Поля: нет.
      Методы:
      - MainWindow() — конструктор, вызывает InitializeComponent().

·     CinemasView : UserControl – View для работы с кинотеатрами.
      Поля: нет.
      Методы:
      - CinemasView() — конструктор, вызывает InitializeComponent().

·     SuppliersView : UserControl – View для работы с поставщиками.
      Поля: нет.
      Методы:
      - SuppliersView() — конструктор, вызывает InitializeComponent().

·     FilmsView : UserControl – View для работы с фильмами.
      Поля: нет.
      Методы:
      - FilmsView() — конструктор, вызывает InitializeComponent().

·     RentalsView : UserControl – View для работы с арендой.
      Поля: нет.
      Методы:
      - RentalsView() — конструктор, вызывает InitializeComponent().


Проект: FilmManagementSystem (консольное приложение)
---------------------------------------------------

·     Program – основной класс консольного приложения: меню, ввод пользователя и вызовы DataManager.
      Поля:
      - dataManager : DataManager (static) — менеджер данных поставщиков и фильмов.
      Методы:
      - Main(string[] args) — точка входа, запускает главный цикл меню.
      - ShowMainMenu()
      - ManageSuppliers()
      - ShowAllSuppliers()
      - AddSupplier()
      - DeleteSupplier()
      - ManageFilms()
      - ShowAllFilms()
      - AddFilm()
      - DeleteFilm()
      - ShowFilmsBySupplier()

·     DataManager – класс управления данными: загрузка/сохранение в файлы и операции со списками.
      Поля/константы:
      - SuppliersFileName : string (const) — имя файла поставщиков (`suppliers.txt`).
      - FilmsFileName : string (const) — имя файла фильмов (`films.txt`).
      - suppliers : List<Supplier> — список поставщиков.
      - films : List<Film> — список фильмов.
      Методы:
      - DataManager() — конструктор (инициализирует списки и вызывает LoadData()).
      - LoadData() — загружает поставщиков и фильмы из файлов.
      - SaveData() — сохраняет поставщиков и фильмы в файлы.
      - AddSupplier(Supplier supplier)
      - AddFilm(Film film)
      - GetAllSuppliers() : List<Supplier>
      - GetAllFilms() : List<Film>
      - GetSupplierById(int id) : Supplier
      - GetFilmById(int id) : Film
      - DeleteSupplier(int id) : bool
      - DeleteFilm(int id) : bool
      - GetFilmsBySupplier(int supplierId) : List<Film>

·     Film – модель фильма для консольного приложения.
      Свойства:
      - Id : int
      - Title : string
      - Category : string
      - Screenwriter : string
      - Director : string
      - ProductionCompany : string
      - ReleaseYear : int
      - SupplierId : int
      - PurchaseCost : decimal
      Методы:
      - Film() — конструктор по умолчанию.
      - Film(int id, string title, string category, string screenwriter, string director, string productionCompany, int releaseYear, int supplierId, decimal purchaseCost)
      - ToString() : string
      - ToFileString() : string — сериализация в строку для сохранения.
      - FromFileString(string line) : Film (static) — восстановление из строки файла.

·     Supplier – модель поставщика для консольного приложения.
      Свойства:
      - Id : int
      - Name : string
      - LegalAddress : string
      - BankName : string
      - BankAccountNumber : string
      - INN : string
      Методы:
      - Supplier() — конструктор по умолчанию.
      - Supplier(int id, string name, string legalAddress, string bankName, string bankAccountNumber, string inn)
      - ToString() : string
      - ToFileString() : string — сериализация в строку для сохранения.
      - FromFileString(string line) : Supplier (static) — восстановление из строки файла.


